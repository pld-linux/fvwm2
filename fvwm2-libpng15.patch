--- fvwm-2.5.28/libs/PictureImageLoader.c~	2012-02-12 15:50:18.574827493 +0100
+++ fvwm-2.5.28/libs/PictureImageLoader.c	2012-02-12 15:51:19.288507908 +0100
@@ -458,16 +458,16 @@
 	{
 		Fpng_set_expand(Fpng_ptr);
 	}
-	if (Finfo_ptr->color_type == FPNG_COLOR_TYPE_RGB_ALPHA)
+	if (png_get_color_type(Fpng_ptr, Finfo_ptr) == FPNG_COLOR_TYPE_RGB_ALPHA)
 	{
 		hasa = 1;
 	}
-	if (Finfo_ptr->color_type == FPNG_COLOR_TYPE_GRAY_ALPHA)
+	if (png_get_color_type(Fpng_ptr, Finfo_ptr) == FPNG_COLOR_TYPE_GRAY_ALPHA)
 	{
 		hasa = 1;
 		hasg = 1;
 	}
-	if (Finfo_ptr->color_type == FPNG_COLOR_TYPE_GRAY)
+	if (png_get_color_type(Fpng_ptr, Finfo_ptr) == FPNG_COLOR_TYPE_GRAY)
 	{
 		hasg = 1;
 	}
